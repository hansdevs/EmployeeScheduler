{% extends "base.html" %}
{% block content %}
<h2>Official Schedule</h2>
{% if not is_published %}
<div class="alert alert-warning">
  The schedule is not yet published!
</div>
{% endif %}

{% for day in range(7) %}
  <h4>Day {{ day }} ({{ ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][day] }})</h4>
  {% set day_shifts = schedule|selectattr("day","equalto",day)|list %}
  {% if day_shifts %}
    <ul class="list-group mb-3">
      {% for s in day_shifts %}
      {% set emp = employees|selectattr("id","equalto",s.employee_id)|list|first %}
      <li class="list-group-item">
        <strong>
          {% if emp is defined and emp %}{{ emp.name }}{% else %} Employee #{{ s.employee_id }} {% endif %}
        </strong>
        from {{ "%02d"|format(s.start) }}:00 to {{ "%02d"|format(s.end) }}:00
      </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No shifts scheduled this day.</p>
  {% endif %}
{% endfor %}
{% endblock %}
