<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employees</title>
  
  <!-- Bootstrap CSS -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
  />
  
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/pages/schedule.css" />
</head>
<body>
  <!-- TOP NAV BAR -->
  <div class="navbar">
    <div class="container-fluid">
      <div class="d-flex align-items-center">
        <strong class="text-white me-3">Scheduler Beta</strong>
        <a href="/pages/index.html" class="text-white-50 me-3">Home</a>
        <a href="/pages/schedule.html" class="text-white-50 me-3">Schedule</a>
        <a href="/pages/business.html" class="text-white-50 me-3">Business</a>
        <a href="/pages/employees.html" class="text-white me-3">Employees</a>
        <a href="/pages/stations.html" class="text-white-50 me-3">Stations</a>
        <a href="/pages/official.html" class="text-white-50 me-3">Official&nbsp;Schedule</a>
      </div>
      <div id="localTime" class="text-white-50 small"></div>
    </div>
  </div>

  <div class="container-fluid py-4">
    <div id="statusMessage"></div>
    
    <div class="employees-container">
      <div class="employees-header">
        <h2 class="employees-title">Employees</h2>
        <div>
          <button class="btn btn-outline-primary me-2" onclick="loadEmployees()">
            <i class="bi bi-arrow-clockwise"></i> Refresh
          </button>
          <button class="btn btn-outline-info" onclick="showTimeclockModal()">
            <i class="bi bi-clock-history"></i> Time Clock
          </button>
        </div>
      </div>
      
      <!-- Table for existing employees -->
      <div class="table-responsive">
        <table class="table table-hover" id="empTable">
          <thead class="table-light">
            <tr>
              <th>ID/Code</th>
              <th>Name</th>
              <th>Type/Role</th>
              <th>Color</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="empTableBody">
            <!-- Filled via JS -->
          </tbody>
        </table>
      </div>
      
      <!-- Add New Employee Form -->
      <div class="employee-form">
        <h3 class="form-title">Add New Employee</h3>
        <div class="row">
          <div class="col-md-3 mb-3">
            <label class="form-label" for="empName">Name</label>
            <input type="text" id="empName" class="form-control" placeholder="Employee name" required>
          </div>
          
          <div class="col-md-3 mb-3">
            <label class="form-label" for="empType">Type/Role</label>
            <input type="text" id="empType" class="form-control" placeholder="Attorney, Cleaning, etc.">
          </div>
          
          <div class="col-md-3 mb-3">
            <label class="form-label" for="empId">ID/Punch Code</label>
            <input type="text" id="empId" class="form-control" placeholder="Custom ID or leave blank">
            <small class="text-muted">Used for time clock punch in/out</small>
          </div>
          
          <div class="col-md-3 mb-3">
            <label class="form-label" for="empColor">Color</label>
            <select id="empColor" class="form-select">
              <option value="block-blue">Blue</option>
              <option value="block-green">Green</option>
              <option value="block-purple">Purple</option>
              <option value="block-orange">Orange</option>
              <option value="block-red">Red</option>
              <option value="block-yellow">Yellow</option>
            </select>
          </div>
        </div>
        
        <button class="add-btn" onclick="addEmployee()">
          <i class="bi bi-plus-circle me-2"></i> Add Employee
        </button>
      </div>
    </div>
    
    <!-- Time Clock Integration Section -->
    <div class="employees-container mt-4">
      <h3 class="employees-title mb-3">Time Clock Integration</h3>
      <div class="alert alert-info">
        <i class="bi bi-info-circle-fill me-2"></i>
        Employee IDs can be used as punch codes for the time clock system. Each employee can use their ID to clock in and out.
      </div>
      
      <div class="row">
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-primary text-white">
              <i class="bi bi-clock me-2"></i> Time Clock Setup
            </div>
            <div class="card-body">
              <p>Configure how the time clock system works with your schedule:</p>
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" id="enforceSchedule" checked>
                <label class="form-check-label" for="enforceSchedule">
                  Enforce scheduled hours (flag early/late punches)
                </label>
              </div>
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" id="allowRemotePunch" checked>
                <label class="form-check-label" for="allowRemotePunch">
                  Allow remote punch in/out
                </label>
              </div>
              <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="requirePhoto">
                <label class="form-check-label" for="requirePhoto">
                  Require photo verification on punch
                </label>
              </div>
              <button class="btn btn-primary" onclick="saveTimeclockSettings()">
                <i class="bi bi-save me-2"></i> Save Settings
              </button>
            </div>
          </div>
        </div>
        
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-success text-white">
              <i class="bi bi-link-45deg me-2"></i> API Endpoints
            </div>
            <div class="card-body">
              <p>Use these endpoints to integrate with external time clock systems:</p>
              <ul class="list-group">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  <code>/api/timeclock/punch</code>
                  <span class="badge bg-primary">POST</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  <code>/api/timeclock/status/:employee_id</code>
                  <span class="badge bg-success">GET</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  <code>/api/timeclock/report</code>
                  <span class="badge bg-success">GET</span>
                </li>
              </ul>
              <div class="mt-3">
                <a href="#" class="btn btn-outline-secondary" onclick="showApiDocs()">
                  <i class="bi bi-file-earmark-text me-2"></i> View API Documentation
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Time Clock Modal -->
  <div class="modal fade" id="timeclockModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title"><i class="bi bi-clock me-2"></i> Time Clock Terminal</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="text-center mb-4">
            <h3>Employee Punch In/Out</h3>
            <p class="text-muted">Enter your employee ID to clock in or out</p>
          </div>
          
          <div class="row justify-content-center">
            <div class="col-md-6">
              <div class="input-group mb-3">
                <span class="input-group-text"><i class="bi bi-person-badge"></i></span>
                <input type="text" id="punchIdInput" class="form-control form-control-lg" placeholder="Enter ID/Code">
                <button class="btn btn-primary" type="button" onclick="processPunch()">Submit</button>
              </div>
              
              <div id="punchStatus" class="alert alert-info d-none">
                <!-- Status will appear here -->
              </div>
              
              <div class="text-center mt-4">
                <div id="currentTime" class="display-6 mb-2">00:00:00</div>
                <div id="currentDate" class="text-muted">Loading date...</div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Local time display -->
  <script>
    function updateLocalTime() {
      const now = new Date();
      const timeString = now.toLocaleString([], { 
        dateStyle: 'short',
        timeStyle: 'medium' 
      });
      document.getElementById('localTime').textContent = timeString;
    }
    setInterval(updateLocalTime, 1000);
    updateLocalTime();
  </script>

  <!-- Employee Management JS -->
  <script src="/js/employee-management.js"></script>
</body>
</html>

